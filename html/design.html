<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Design your own {{.PhoneName}} case</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="/bootstrap.min.css">

    <!-- jQuery UI theme CSS -->
    <link rel="stylesheet" href="/jquery-ui.css">
    
    <!-- Latest compiled and minified JavaScript -->
    <link rel="stylesheet" href="/design.css">

    <!-- Optional theme -->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">-->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
  </head>
  <body style="margin:0px;height:100%;">
    <script src="/jquery-1.11.0.min.js"></script>
    <!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
    <script src="/jQuery-File-Upload-9.8.0/js/vendor/jquery.ui.widget.js"></script>
    <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
    <script src="/jQuery-File-Upload-9.8.0/js/jquery.iframe-transport.js"></script>
    <!-- The basic File Upload plugin -->
    <script src="/jQuery-File-Upload-9.8.0/js/jquery.fileupload.js"></script>

    <script src="/bootstrap.min.js"></script>

    <!-- jQuery UI -->
    <script src="/jquery-ui.js"></script>
    <script>
      // global vars
      var mycase_uid = {{.Uid}};
      var ig_name = {{.IGName}};
      var fb_name = {{.FBName}};
      var has_ig_token = {{.HasIGToken}};
      var has_fb_token = {{.HasFBToken}};
    </script>

    <script src="/design.js"></script>
    <script>
      $(document).ready(function() {
      console.log("design init");
      design_button_init();
      design_panel_init();
      
      $("#btn-instagram-login").on("click", function(event) {
      var feature = "height=600, width=810, scrollbars=yes, resizable=yes";
      window.open("{{.InstagramApiUrl}}", '3km', feature);
      });
      $("#btn-instagram-login2").on("click", function(event) {
      var feature = "height=600, width=810, scrollbars=yes, resizable=yes";
      var doc = window.open("{{.InstagramApiUrl}}", '3km', feature);
      console.log(doc);
      });
      $("#btn-facebook-login2").on("click", function(event) {
      var feature = "height=600, width=810, scrollbars=yes, resizable=yes";
      var doc = window.open("/test.html", '3km', feature);
      console.log(doc);
      });

      $("#btn-test").on("click", function(event) {
      $("#img-editor-photo").draggable();
      $("#img-editor-layer").show();
      console.log("xxx");
      });
      });
      
      $(function() {
      //$("#draggable").draggable();
      //$("#img-editor-layer").resizable();
      //$("#img-editor-photo").resizable({handles: "n, e, s, w, ne, se, sw, nw"});
      //$("#img-editor-photo").draggable();
      //$("#img-editor-layer").draggable();
      });
    </script>

    <!-- Modal -->
    <div class="modal fade" id="modal-device" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	    <h4 class="modal-title" id="myModalLabel">Select your device</h4>
	  </div>
	  <div class="modal-body">
	    Put a device list here
	    <p>to be continue</p>
	    <p>to be continue</p>
	    <p>to be continue</p>
	    <p>to be continue</p>
	    <p>to be continue</p>
	  </div>
	  <div class="modal-footer">
	    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	    <button type="button" class="btn btn-primary">Save changes</button>
	  </div>
	</div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modal-upload" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
	    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
	    <h4 class="modal-title" id="myModalLabel">Upload your photo</h4>
	  </div>
	  <div class="modal-body">
	    <div id="upload_form" class="upload_form">
	      <span>Select files...</span>
	      <!-- The file input field used as target for the file upload widget -->
	      <input id="fileupload" type="file" name="files[]" multiple>
	      <div id="files" class="files"></div>
	    </div>
	  </div>
	  <div class="modal-footer">
	    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	    <button type="button" class="btn btn-primary">Save changes</button>
	  </div>
	</div>
      </div>
    </div>
    
    <div class="container-fluid" style="margin-bottom:0px;background-color:#eee;height:100%;position:absolute">
      <div class="row">
	<div class="col-sm-4 col-md-4">
	  <div id="logo-image" style="margin-top:30px;">
	    <img src="http://www.casetify.com/img/casetagram_id.png" alt="Make your case" class="img-rounded">
	  </div>
	</div>
	<div class="col-sm-4 col-md-4">
	  <div style="margin-top:50px;" class="border">
	    <img style="position:absolute;" src="{{.ResPath}}/base_iphone6_261.png"></img>
	    <img id="userimg" style="position:absolute;clip:rect(0px 282px 560px 0px)" src=""></img>
	    <img style="position:absolute;filter:invert(100%);-webkit-filter:invert(100%)" src="{{.ResPath}}/mask_iphone6.png"></img>
	    <img style="position:absolute;" src="{{.ResPath}}/overlay_iphone6-single-261.png"></img>
	    <div style="width:282px;height:560px;position:absolute;" id="img-editor-div"></div>
	  </div>
	</div>
	<div class="col-sm-4 col-md-4">
	  <div style="margin-top:30px;">
	  <ul class="nav nav-tabs nav-justified" role="tablist">
	    <li role="presention">
	      <a href="#" id="btn-select-device">Device</a>
	    </li>
	    <li role="presention">
	      <a href="#" id="btn-select-photo">Photo</a>
	    </li>
	    <li role="presention">
	      <a href="#" id="btn-select-filter">Filter</a>
	    </li>
	  </ul>
	  </div>
	  <div style="margin-top:10px;height:100%;overflow:auto">
	    <div id="panel-device" class="panel panel-info">
	      <div class="panel-heading">
		<h3 class="panel-title">Choose your device</h3>
	      </div>
	      <div class="panel-body">
		Your device: {{.PhoneDispName}}
	      </div>
	      <ul class="list-group" style="overflow:auto;">
		<li class="list-group-item">iPhone 6P</li>
		<li class="list-group-item">iPhone 5s</li>
		<li class="list-group-item">iPhone 5c</li>
		<li class="list-group-item">iPhone 5</li>
		<li class="list-group-item">iPhone 4/4s</li>
	      </ul>
	      <div class="panel-footer">
		<a id="btn-more-device" href="#" data-toggle="modal" data-target="#modal-device">
		  More...
		</a>
	      </div>
	    </div>

	    <div id="panel-photo" class="panel panel-info">
	      <div class="panel-heading">
		<h3 class="panel-title">Select a photo</h3>
	      </div>
	      <ul class="nav nav-pills nav-justified" role="tablist">
		<li role="presention">
		  <a href="#" id="btn-instagram-login2">Instagram</a>
		</li>
		<li role="presention">
		  <a href="#" id="btn-facebook-login2">Facebook</a>
		</li>
		<li role="presention">
		  <a id="btn-upload" href="#" data-toggle="modal" data-target="#modal-upload">Upload</a>
		</li>
		<li role="presention">
		  <a id="btn-test" href="#" >Test</a>
		</li>
	      </ul>
	      <div id="draggable">
		<div id="panel-place-photo">

		</div>
	      </div>
	    </div>

	    <div id="panel-filter" class="panel panel-info">
	      <div class="panel-heading">
		<h3 class="panel-title">Select a filter</h3>
	      </div>
	    </div>

	    <a role="button" class="btn btn-primary btn-lg btn-block">SAVE THIS DESIGN</a>
	  </div>

	  <div class="f-height border" style="position:fixed;display:none;">
	    <div class="f-width">
	      <ul class="nav nav-tabs nav-justified">
		<li id="list_product"><a href="#" id="btn_product">Product</a></li>
		<li id="list_photo"><a href="#" id="btn_photo">Photo</a>
		<li id="list_filter"><a href="#" id="btn_filter">Filter</a>
	      </ul>
	    </div>

	    <div class="f-height relative" id="product_sub_nav">
	      <ul class="nav nav-tabs nav-justified">
		<li><a href="#">Device</a>
		<li><a href="#">Case</a>
	      </ul>

	      <h4 class="border-bottom" style="margin:0px;padding 11px 22px;" align="center">Choose Your Device</h4>

	      <div class="f-height" style="display:block;overflow:auto" id="product_list">
		<ul class="featured-phone-list" style="display:block;box-sizing:border-box;margin:0px;padding:0px;clear:both;list-style:none">
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>
		  <li class="block f-left border-right border-bottom">
		    <a href="#" class="table f-width f-height">iPhone 6</a>
		  </li>

		</ul>
	      </div>

	    </div>

	    <div class="" id="photo_sub_nav" style="display:none">
	      <ul class="nav nav-tabs nav-justified">
		<li><a href="#">Instagram</a>
		<li><a href="#">Facebook</a>
		<li><a href="#" id="btn_upload">Upload</a>
	      </ul>
	    </div>

	    <div id="upload_form" class="upload_form hide">
	      <span>Select files...</span>
	      <!-- The file input field used as target for the file upload widget -->
	      <input id="fileupload" type="file" name="files[]" multiple>
	      <div id="files" class="files"></div>
	    </div>

	    <div id="instagram_login">
	      <a id="btn-instagram-login" href="#">Login</a>
	    </div>

	    <div class="" id="filter_sub_nav" style="display:none">
	      <ul class="nav nav-tabs nav-justified">
		<li><a href="#">Filter</a>
	      </ul>
	    </div>
	  </div>
	</div>
      </div>
    </div>

    <div id="img-editor-layer" style="position:absolute;height:800px;width:100%px;z-index:100;background-color:rgba(0,0,0,0.1);display:none;" class="absolute-center">
      <img id="img-editor-photo" src="/uploadfiles/th9_blz.jpg" width="600px;" style="z-index:101" class="absolute-center">
      
    </div>
    
<script>
/*jslint unparam: true */
/*global window, $ */
$(function () {
    'use strict';
    // Change this to the location of your server-side upload handler:
    var url = window.location.hostname === 'blueimp.github.io' ?
                '//jquery-file-upload.appspot.com/' : '/upload';
    $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            $('<p/>').text(data.result.name).appendTo('#files');
            $("#userimg").attr("src", "/uploadfiles/" + data.result.name);
            console.log(data.result.name);
            //$.each(data.result.files, function (index, file) {
            //    console.log(file.name)
            //    $('<p/>').text(file.name).appendTo('#files');
            //});
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .progress-bar').css(
                'width',
                progress + '%'
            );
        }
    }).prop('disabled', !$.support.fileInput)
        .parent().addClass($.support.fileInput ? undefined : 'disabled');
});
</script>

  </body>
</html>
